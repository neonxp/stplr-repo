name="recutils"
version="1.9"
release=1
summary="The GNU recutils are a set of libraries and utilities supporting the Rec format"
desc="The GNU recutils are a set of libraries and utilities supporting the Rec format: a human-readable, text-based format to store little to medium sized databases."
maintainer="Alexander NeonXP Kiryukhin <i@neonxp.ru>"
architectures=("amd64")
license="GPL-3.0-only"
sources=("http://gnu.neonxp.ru/recutils/recutils-1.9.tar.gz")
checksums=("sha256:6301592b0020c14b456757ef5d434d49f6027b8e5f3a499d13362f205c486e0e")
disable_network=1

build_deps=("make" "gcc" "help2man" "makeinfo")

build() {
    mv recutils-1.9/* .
    ./configure --prefix $srcdir/build/
    make
    make install
}

package() {
    install-binary $srcdir/build/bin/csv2rec
    install-binary $srcdir/build/bin/rec2csv
    install-binary $srcdir/build/bin/recdel
    install-binary $srcdir/build/bin/recfix
    install-binary $srcdir/build/bin/recfmt
    install-binary $srcdir/build/bin/recinf
    install-binary $srcdir/build/bin/recins
    install-binary $srcdir/build/bin/recsel
    install-binary $srcdir/build/bin/recset

    install-manual $srcdir/build/share/man/man1/csv2rec.1
    install-manual $srcdir/build/share/man/man1/rec2csv.1
    install-manual $srcdir/build/share/man/man1/recdel.1
    install-manual $srcdir/build/share/man/man1/recfix.1
    install-manual $srcdir/build/share/man/man1/recfmt.1
    install-manual $srcdir/build/share/man/man1/recinf.1
    install-manual $srcdir/build/share/man/man1/recins.1
    install-manual $srcdir/build/share/man/man1/recsel.1
    install-manual $srcdir/build/share/man/man1/recset.1

    install-library $srcdir/build/lib/librec.so.1.0.0
    install -Dm644 $srcdir/build/include/rec.h $pkgdir/usr/include/rec.h
}

files() {
    files-find-binary
    files-find "/usr/share/man/**/man1/*" "/usr/include/*" "/usr/lib64/*"
}
